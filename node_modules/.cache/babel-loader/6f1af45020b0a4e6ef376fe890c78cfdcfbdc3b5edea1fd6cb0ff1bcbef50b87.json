{"ast":null,"code":"import router from \"../router\";\nimport { APIService } from \"../http/APIService\";\nconst apiService = new APIService();\nexport default {\n  name: \"Auth\",\n  data: () => ({\n    credentials: {},\n    valid: true,\n    showMsg: \"\",\n    loading: false,\n    rules: {\n      username: [v => !!v || \"Username is required\", v => v && v.length > 3 || \"A username must be more than 3 characters long\", v => /^[a-z0-9_]+$/.test(v) || \"A username can only contain letters and digits\"],\n      password: [v => !!v || \"Password is required\", v => v && v.length > 7 || \"The password must be longer than 7 characters\"]\n    },\n    showPassword: false\n  }),\n  methods: {\n    login() {\n      // checking if the input is valid\n      console.log(\"IS THIS THING WORKING\");\n      if (this.$refs.form) {\n        this.loading = true;\n        apiService.authenticateLogin(this.credentials).then(res => {\n          localStorage.setItem(\"token\", res.data.token);\n          localStorage.setItem(\"isAuthenticates\", JSON.stringify(true));\n          localStorage.setItem(\"log_user\", JSON.stringify(this.credentials.username));\n          //router.push(\"/\");\n          //router.go(-1);\n          window.location = \"/\";\n        }).catch(e => {\n          this.loading = false;\n          localStorage.removeItem(\"isAuthenticates\");\n          localStorage.removeItem(\"log_user\");\n          localStorage.removeItem(\"token\");\n          // router.go(-1);\n          this.showMsg = \"error\";\n        });\n      }\n    },\n    testMethod() {\n      console.log(this.$refs.form);\n      console.log(\"hey\");\n    }\n  }\n};","map":{"version":3,"mappings":"AA6EE,OAAOA,MAAK,MAAO,WAAW;AAC9B,SAASC,UAAS,QAAS,oBAAoB;AAC/C,MAAMC,UAAS,GAAI,IAAID,UAAU,EAAE;AACnC,eAAe;EACbE,IAAI,EAAE,MAAM;EACZC,IAAI,EAAE,OAAO;IACXC,WAAW,EAAE,CAAC,CAAC;IACfC,KAAK,EAAE,IAAI;IACXC,OAAO,EAAE,EAAE;IACXC,OAAO,EAAE,KAAK;IACdC,KAAK,EAAE;MACLC,QAAQ,EAAE,CACPC,CAAC,IAAK,CAAC,CAACA,KAAK,sBAAsB,EACnCA,CAAC,IAAMA,KAAKA,CAAC,CAACC,MAAK,GAAI,CAAC,IAAK,gDAAgD,EAC7ED,CAAC,IAAK,cAAc,CAACE,IAAI,CAACF,CAAC,KAAK,gDAAgD,CAClF;MACDG,QAAQ,EAAE,CACPH,CAAC,IAAK,CAAC,CAACA,KAAK,sBAAsB,EACnCA,CAAC,IAAMA,KAAKA,CAAC,CAACC,MAAK,GAAI,CAAC,IAAK,+CAA+C;IAEjF,CAAC;IACDG,YAAY,EAAE;EAChB,CAAC,CAAC;EACFC,OAAO,EAAE;IACPC,KAAK,GAAG;MACN;MACAC,OAAO,CAACC,GAAG,CAAC,uBAAuB;MACnC,IAAI,IAAI,CAACC,KAAK,CAACC,IAAI,EAAE;QACnB,IAAI,CAACb,OAAM,GAAI,IAAI;QACnBN,UAAS,CACJoB,iBAAiB,CAAC,IAAI,CAACjB,WAAW,EAClCkB,IAAI,CAAEC,GAAG,IAAK;UACbC,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEF,GAAG,CAACpB,IAAI,CAACuB,KAAK,CAAC;UAC7CF,YAAY,CAACC,OAAO,CAAC,iBAAiB,EAAEE,IAAI,CAACC,SAAS,CAAC,IAAI,CAAC,CAAC;UAC7DJ,YAAY,CAACC,OAAO,CAAC,UAAU,EAAEE,IAAI,CAACC,SAAS,CAAC,IAAI,CAACxB,WAAW,CAACK,QAAQ,CAAC,CAAC;UAC3E;UACA;UACAoB,MAAM,CAACC,QAAO,GAAI,GAAG;QACvB,CAAC,CAAC,CAACC,KAAK,CAAEC,CAAC,IAAK;UACd,IAAI,CAACzB,OAAM,GAAI,KAAK;UACpBiB,YAAY,CAACS,UAAU,CAAC,iBAAiB,CAAC;UAC1CT,YAAY,CAACS,UAAU,CAAC,UAAU,CAAC;UACnCT,YAAY,CAACS,UAAU,CAAC,OAAO,CAAC;UAChC;UACA,IAAI,CAAC3B,OAAM,GAAI,OAAO;QACxB,CAAC,CAAC;MACR;IACF,CAAC;IACD4B,UAAU,GAAG;MACXjB,OAAO,CAACC,GAAG,CAAC,IAAI,CAACC,KAAK,CAACC,IAAI,CAAC;MAC5BH,OAAO,CAACC,GAAG,CAAC,KAAK,CAAC;IACpB;EACF;AACF,CAAC","names":["router","APIService","apiService","name","data","credentials","valid","showMsg","loading","rules","username","v","length","test","password","showPassword","methods","login","console","log","$refs","form","authenticateLogin","then","res","localStorage","setItem","token","JSON","stringify","window","location","catch","e","removeItem","testMethod"],"sourceRoot":"","sources":["E:\\Documents\\Education\\UNO\\Courses\\Spring 2023\\ISQA 4900\\Assignments\\Assignment 2\\movie-api\\movie-fe\\src\\components\\Auth.vue"],"sourcesContent":["<template>\r\n  `\r\n  <div class=\"container\">\r\n    <div class=\"row align-items-center justify-content-center\">\r\n      <div class=\"col-12 col-sm-6 col-md-4 col-lg-4\">\r\n        <div class=\"card mx-auto shadow\">\r\n          <div class=\"card-body\">\r\n            <div class=\"card-title\"><span>Login</span></div>\r\n            <div\r\n              v-if=\"showMsg === 'error'\"\r\n              close-icon=\"mdi-close-circle\"\r\n              :value=\"true\"\r\n              class=\"alert alert-danger\"\r\n              role=\"alert\"\r\n              dense\r\n            >\r\n              Invalid username or password. Please Try again. </div>\r\n          </div>\r\n          <div class=\"card-text pt-2\">\r\n            <div class=\"row align-items-center justify-content-center\" v-if=\"loading\">\r\n              <div class=\"progress\">\r\n                <div\r\n                    class=\"progress-bar progress-bar-striped progress-bar-animated\"\r\n                    role=\"progressbar\"\r\n                    aria-valuenow=\"75\"\r\n                    aria-valuemin=\"0\"\r\n                    aria-valuemax=\"100\"\r\n                    style=\"width: 75%\"\r\n                >\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-md-10 mb-3\">\r\n              <div class=\"input-group\">\r\n                <div class=\"input-group-prepend\">\r\n                  <span class=\"input-group-text\">@</span>\r\n                </div>\r\n                <input\r\n                    v-model=\"credentials.username\"\r\n                    :counter=\"70\"\r\n                    label=\"Username\"\r\n                    :rules=\"rules.username\"\r\n                    maxlength=\"70\"\r\n                    required\r\n                    type=\"text\"\r\n                    class=\"form-control mb-3\"\r\n                    placeholder=\"Username\"\r\n                    aria-describedby=\"inputGroupPrepend2\"\r\n                />\r\n                <div class=\"w-100\"></div>\r\n                <div class=\"input-group-prepend\">\r\n                  <span class=\"input-group-text\">***</span>\r\n                </div>\r\n                <input\r\n                    :type=\"showPassword ? 'text' : 'Password'\"\r\n                    v-model=\"credentials.password\"\r\n                    label=\"Password\"\r\n                    :rules=\"rules.password\"\r\n                    maxlength=\"20\"\r\n                    required\r\n                    :append-icon=\"showPassword ? 'mdi-eye' : 'mdi-eye-off'\"\r\n                    @click:append=\"showPassword = ! showPassword\"\r\n                    class=\"form-control\"\r\n                    placeholder=\"Password\"\r\n                    aria-describedby=\"inputGroupPrepend2\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <button ref =\"form\" @click.prevent=\"login\" class=\"btn btn-primary\">Login</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  `\r\n</template>\r\n<script>\r\n  import router from \"../router\";\r\n  import { APIService } from \"../http/APIService\";\r\n  const apiService = new APIService();\r\n  export default {\r\n    name: \"Auth\",\r\n    data: () => ({\r\n      credentials: {},\r\n      valid: true,\r\n      showMsg: \"\",\r\n      loading: false,\r\n      rules: {\r\n        username: [\r\n          (v) => !!v || \"Username is required\",\r\n          (v) => (v && v.length > 3) || \"A username must be more than 3 characters long\",\r\n          (v) => /^[a-z0-9_]+$/.test(v) || \"A username can only contain letters and digits\",\r\n        ],\r\n        password: [\r\n          (v) => !!v || \"Password is required\",\r\n          (v) => (v && v.length > 7) || \"The password must be longer than 7 characters\",\r\n        ],\r\n      },\r\n      showPassword: false,\r\n    }),\r\n    methods: {\r\n      login() {\r\n        // checking if the input is valid\r\n        console.log(\"IS THIS THING WORKING\")\r\n        if (this.$refs.form) {\r\n          this.loading = true;\r\n          apiService\r\n              .authenticateLogin(this.credentials)\r\n              .then((res) => {\r\n                localStorage.setItem(\"token\", res.data.token);\r\n                localStorage.setItem(\"isAuthenticates\", JSON.stringify(true));\r\n                localStorage.setItem(\"log_user\", JSON.stringify(this.credentials.username));\r\n                //router.push(\"/\");\r\n                //router.go(-1);\r\n                window.location = \"/\";\r\n              }).catch((e) => {\r\n                this.loading = false;\r\n                localStorage.removeItem(\"isAuthenticates\");\r\n                localStorage.removeItem(\"log_user\");\r\n                localStorage.removeItem(\"token\");\r\n                // router.go(-1);\r\n                this.showMsg = \"error\";\r\n              });\r\n        }\r\n      },\r\n      testMethod() {\r\n        console.log(this.$refs.form);\r\n        console.log(\"hey\");\r\n      },\r\n    },\r\n  };\r\n</script>\r\n\r\n<style>\r\n  input {\r\n    padding: 1rem;\r\n  }\r\n\r\n  form {\r\n    display: flex;\r\n    justify-content: center;\r\n    /*Tutorial vertical, I changed it to column*/\r\n    flex-direction: column;\r\n  }\r\n</style>}\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}