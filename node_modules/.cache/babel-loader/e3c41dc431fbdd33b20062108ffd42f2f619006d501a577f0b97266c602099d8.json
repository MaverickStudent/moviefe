{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives, vModelDynamic as _vModelDynamic, withModifiers as _withModifiers, createTextVNode as _createTextVNode, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container\"\n};\nconst _hoisted_2 = {\n  class: \"row align-items-center justify-content-center\"\n};\nconst _hoisted_3 = {\n  class: \"col-12 col-sm-6 col-md-4 col-lg-4\"\n};\nconst _hoisted_4 = {\n  class: \"card mx-auto shadow\"\n};\nconst _hoisted_5 = {\n  class: \"card-body\"\n};\nconst _hoisted_6 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"card-title\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", null, \"Login\")], -1 /* HOISTED */);\nconst _hoisted_7 = {\n  key: 0,\n  \"close-icon\": \"mdi-close-circle\",\n  value: true,\n  class: \"alert alert-danger\",\n  role: \"alert\",\n  dense: \"\"\n};\nconst _hoisted_8 = {\n  class: \"card-text pt-2\"\n};\nconst _hoisted_9 = {\n  key: 0,\n  class: \"row align-items-center justify-content-center\"\n};\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"progress\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"progress-bar progress-bar-striped progress-bar-animated\",\n  role: \"progressbar\",\n  \"aria-valuenow\": \"75\",\n  \"aria-valuemin\": \"0\",\n  \"aria-valuemax\": \"100\",\n  style: {\n    \"width\": \"75%\"\n  }\n})], -1 /* HOISTED */);\nconst _hoisted_11 = [_hoisted_10];\nconst _hoisted_12 = {\n  class: \"col-md-10 mb-3\"\n};\nconst _hoisted_13 = {\n  class: \"input-group\"\n};\nconst _hoisted_14 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"input-group-prepend\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"input-group-text\"\n}, \"@\")], -1 /* HOISTED */);\nconst _hoisted_15 = [\"rules\"];\nconst _hoisted_16 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"w-100\"\n}, null, -1 /* HOISTED */);\nconst _hoisted_17 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"input-group-prepend\"\n}, [/*#__PURE__*/_createElementVNode(\"span\", {\n  class: \"input-group-text\"\n}, \"***\")], -1 /* HOISTED */);\nconst _hoisted_18 = [\"type\", \"rules\", \"append-icon\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createTextVNode(\" ` \"), _createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"div\", _hoisted_5, [_hoisted_6, _ctx.showMsg === 'error' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, \" Invalid username or password. Please Try again. \")) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_8, [_ctx.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _hoisted_11)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_hoisted_14, _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => _ctx.credentials.username = $event),\n    counter: 70,\n    label: \"Username\",\n    rules: _ctx.rules.username,\n    maxlength: \"70\",\n    required: \"\",\n    type: \"text\",\n    class: \"form-control mb-3\",\n    placeholder: \"Username\",\n    \"aria-describedby\": \"inputGroupPrepend2\"\n  }, null, 8 /* PROPS */, _hoisted_15), [[_vModelText, _ctx.credentials.username]]), _hoisted_16, _hoisted_17, _withDirectives(_createElementVNode(\"input\", {\n    type: _ctx.showPassword ? 'text' : 'Password',\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.credentials.password = $event),\n    label: \"Password\",\n    rules: _ctx.rules.password,\n    maxlength: \"20\",\n    required: \"\",\n    \"append-icon\": _ctx.showPassword ? 'mdi-eye' : 'mdi-eye-off',\n    \"onClick:append\": _cache[2] || (_cache[2] = $event => _ctx.showPassword = !_ctx.showPassword),\n    class: \"form-control\",\n    placeholder: \"Password\",\n    \"aria-describedby\": \"inputGroupPrepend2\"\n  }, null, 40 /* PROPS, HYDRATE_EVENTS */, _hoisted_18), [[_vModelDynamic, _ctx.credentials.password]])])]), _createElementVNode(\"button\", {\n    ref: \"form\",\n    onClick: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.login && $options.login(...args), [\"prevent\"])),\n    class: \"btn btn-primary\"\n  }, \"Login\", 512 /* NEED_PATCH */)])])])])]), _createTextVNode(\" ` \")], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"mappings":";;EAEOA,KAAK,EAAC;AAAW;;EACfA,KAAK,EAAC;AAA+C;;EACnDA,KAAK,EAAC;AAAmC;;EACvCA,KAAK,EAAC;AAAqB;;EACzBA,KAAK,EAAC;AAAW;gCACpBC,oBAAgD;EAA3CD,KAAK,EAAC;AAAY,iBAACC,oBAAkB,cAAZ,OAAK;;;EAGjC,YAAU,EAAC,kBAAkB;EAC5BC,KAAK,EAAE,IAAI;EACZF,KAAK,EAAC,oBAAoB;EAC1BG,IAAI,EAAC,OAAO;EACZC,KAAK,EAAL;;;EAICJ,KAAK,EAAC;AAAgB;;;EACpBA,KAAK,EAAC;;iCACTC,oBAUM;EAVDD,KAAK,EAAC;AAAU,iBACnBC,oBAQM;EAPFD,KAAK,EAAC,yDAAyD;EAC/DG,IAAI,EAAC,aAAa;EAClB,eAAa,EAAC,IAAI;EAClB,eAAa,EAAC,GAAG;EACjB,eAAa,EAAC,KAAK;EACnBE,KAAkB,EAAlB;IAAA;EAAA;;qBAPNC,WAUM;;EAEHN,KAAK,EAAC;AAAgB;;EACpBA,KAAK,EAAC;AAAa;iCACtBC,oBAEM;EAFDD,KAAK,EAAC;AAAqB,iBAC9BC,oBAAuC;EAAjCD,KAAK,EAAC;AAAkB,GAAC,GAAC;;iCAclCC,oBAAyB;EAApBD,KAAK,EAAC;AAAO;iCAClBC,oBAEM;EAFDD,KAAK,EAAC;AAAqB,iBAC9BC,oBAAyC;EAAnCD,KAAK,EAAC;AAAkB,GAAC,KAAG;;;mFAjDlD,uBAuEM,OAvENO,UAuEM,GAtEJN,oBAqEM,OArENO,UAqEM,GApEJP,oBAmEM,OAnENQ,UAmEM,GAlEJR,oBAiEM,OAjENS,UAiEM,GAhEJT,oBAWM,OAXNU,UAWM,GAVJC,UAAgD,EAExCC,YAAO,8BADfC,oBAQwD,OARxDC,UAQwD,EADvD,mDACiD,0CAEpDd,oBAmDM,OAnDNe,UAmDM,GAlD6DH,YAAO,kBAAxEC,oBAYM,OAZNG,UAYM,qDACNhB,oBAmCM,OAnCNiB,WAmCM,GAlCJjB,oBAiCM,OAjCNkB,WAiCM,GAhCJC,WAEM,kBACNnB,oBAWE;+DAVWY,gBAAW,CAACQ,QAAQ;IAC5BC,OAAO,EAAE,EAAE;IACZC,KAAK,EAAC,UAAU;IACfC,KAAK,EAAEX,UAAK,CAACQ,QAAQ;IACtBI,SAAS,EAAC,IAAI;IACdC,QAAQ,EAAR,EAAQ;IACRC,IAAI,EAAC,MAAM;IACX3B,KAAK,EAAC,mBAAmB;IACzB4B,WAAW,EAAC,UAAU;IACtB,kBAAgB,EAAC;uDATRf,gBAAW,CAACQ,QAAQ,KAWjCQ,WAAyB,EACzBC,WAEM,kBACN7B,oBAYE;IAXG0B,IAAI,EAAEd,iBAAY;+DACVA,gBAAW,CAACkB,QAAQ;IAC7BR,KAAK,EAAC,UAAU;IACfC,KAAK,EAAEX,UAAK,CAACkB,QAAQ;IACtBN,SAAS,EAAC,IAAI;IACdC,QAAQ,EAAR,EAAQ;IACP,aAAW,EAAEb,iBAAY;IACzB,gBAAY,sCAAEA,iBAAY,IAAKA,iBAAY;IAC5Cb,KAAK,EAAC,cAAc;IACpB4B,WAAW,EAAC,UAAU;IACtB,kBAAgB,EAAC;2EATRf,gBAAW,CAACkB,QAAQ,SAarC9B,oBAAiF;IAAzE+B,GAAG,EAAE,MAAM;IAAEC,OAAK,wDAAUC,yCAAK;IAAElC,KAAK,EAAC;KAAkB,OAAK,oDAK5E","names":["class","_createElementVNode","value","role","dense","style","_hoisted_10","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_ctx","_createElementBlock","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_12","_hoisted_13","_hoisted_14","username","counter","label","rules","maxlength","required","type","placeholder","_hoisted_16","_hoisted_17","password","ref","onClick","$options"],"sourceRoot":"","sources":["E:\\Documents\\Education\\UNO\\Courses\\Spring 2023\\ISQA 4900\\Assignments\\Assignment 2\\movie-api\\movie-fe\\src\\components\\Auth.vue"],"sourcesContent":["<template>\r\n  `\r\n  <div class=\"container\">\r\n    <div class=\"row align-items-center justify-content-center\">\r\n      <div class=\"col-12 col-sm-6 col-md-4 col-lg-4\">\r\n        <div class=\"card mx-auto shadow\">\r\n          <div class=\"card-body\">\r\n            <div class=\"card-title\"><span>Login</span></div>\r\n            <div\r\n              v-if=\"showMsg === 'error'\"\r\n              close-icon=\"mdi-close-circle\"\r\n              :value=\"true\"\r\n              class=\"alert alert-danger\"\r\n              role=\"alert\"\r\n              dense\r\n            >\r\n              Invalid username or password. Please Try again. </div>\r\n          </div>\r\n          <div class=\"card-text pt-2\">\r\n            <div class=\"row align-items-center justify-content-center\" v-if=\"loading\">\r\n              <div class=\"progress\">\r\n                <div\r\n                    class=\"progress-bar progress-bar-striped progress-bar-animated\"\r\n                    role=\"progressbar\"\r\n                    aria-valuenow=\"75\"\r\n                    aria-valuemin=\"0\"\r\n                    aria-valuemax=\"100\"\r\n                    style=\"width: 75%\"\r\n                >\r\n                </div>\r\n              </div>\r\n            </div>\r\n            <div class=\"col-md-10 mb-3\">\r\n              <div class=\"input-group\">\r\n                <div class=\"input-group-prepend\">\r\n                  <span class=\"input-group-text\">@</span>\r\n                </div>\r\n                <input\r\n                    v-model=\"credentials.username\"\r\n                    :counter=\"70\"\r\n                    label=\"Username\"\r\n                    :rules=\"rules.username\"\r\n                    maxlength=\"70\"\r\n                    required\r\n                    type=\"text\"\r\n                    class=\"form-control mb-3\"\r\n                    placeholder=\"Username\"\r\n                    aria-describedby=\"inputGroupPrepend2\"\r\n                />\r\n                <div class=\"w-100\"></div>\r\n                <div class=\"input-group-prepend\">\r\n                  <span class=\"input-group-text\">***</span>\r\n                </div>\r\n                <input\r\n                    :type=\"showPassword ? 'text' : 'Password'\"\r\n                    v-model=\"credentials.password\"\r\n                    label=\"Password\"\r\n                    :rules=\"rules.password\"\r\n                    maxlength=\"20\"\r\n                    required\r\n                    :append-icon=\"showPassword ? 'mdi-eye' : 'mdi-eye-off'\"\r\n                    @click:append=\"showPassword = ! showPassword\"\r\n                    class=\"form-control\"\r\n                    placeholder=\"Password\"\r\n                    aria-describedby=\"inputGroupPrepend2\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <button ref =\"form\" @click.prevent=\"login\" class=\"btn btn-primary\">Login</button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  `\r\n</template>\r\n<script>\r\n  import router from \"../router\";\r\n  import { APIService } from \"../http/APIService\";\r\n  const apiService = new APIService();\r\n  export default {\r\n    name: \"Auth\",\r\n    data: () => ({\r\n      credentials: {},\r\n      valid: true,\r\n      showMsg: \"\",\r\n      loading: false,\r\n      rules: {\r\n        username: [\r\n          (v) => !!v || \"Username is required\",\r\n          (v) => (v && v.length > 3) || \"A username must be more than 3 characters long\",\r\n          (v) => /^[a-z0-9_]+$/.test(v) || \"A username can only contain letters and digits\",\r\n        ],\r\n        password: [\r\n          (v) => !!v || \"Password is required\",\r\n          (v) => (v && v.length > 7) || \"The password must be longer than 7 characters\",\r\n        ],\r\n      },\r\n      showPassword: false,\r\n    }),\r\n    methods: {\r\n      login() {\r\n        // checking if the input is valid\r\n        console.log(\"IS THIS THING WORKING\")\r\n        if (this.$refs.form) {\r\n          this.loading = true;\r\n          apiService\r\n              .authenticateLogin(this.credentials)\r\n              .then((res) => {\r\n                localStorage.setItem(\"token\", res.data.token);\r\n                localStorage.setItem(\"isAuthenticates\", JSON.stringify(true));\r\n                localStorage.setItem(\"log_user\", JSON.stringify(this.credentials.username));\r\n                //router.push(\"/\");\r\n                //router.go(-1);\r\n                window.location = \"/\";\r\n              }).catch((e) => {\r\n                this.loading = false;\r\n                localStorage.removeItem(\"isAuthenticates\");\r\n                localStorage.removeItem(\"log_user\");\r\n                localStorage.removeItem(\"token\");\r\n                // router.go(-1);\r\n                this.showMsg = \"error\";\r\n              });\r\n        }\r\n      },\r\n      testMethod() {\r\n        console.log(this.$refs.form);\r\n        console.log(\"hey\");\r\n      },\r\n    },\r\n  };\r\n</script>\r\n\r\n<style>\r\n  input {\r\n    padding: 1rem;\r\n  }\r\n\r\n  form {\r\n    display: flex;\r\n    justify-content: center;\r\n    /*Tutorial vertical, I changed it to column*/\r\n    flex-direction: column;\r\n  }\r\n</style>}\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}